

# @gya-20190718
## 数据冗余的问题
1. conversations和currentConversation的数据重复，导致更新不及时

解决方案：currentConversation采用index或者conversationId代替？

是否会有渲染的性能问题

2. 置顶会话数组的维护
2.1 如何

# 置顶与免打扰数据维护
1. 每次初始化时根据会话更新，勉强维持生活

置顶的位置计算
1. stick.length

免打扰
1. 直接遍历


# 更新会话未读并发送回执
1. 阅后即焚：特殊，只在用户点击打开，阅读后更新并发送回执
1. 会话：切换会话，更新当前会话的消息
2. 收到消息：不处理，只插入消息
3. 消息列表更新时处理
    1. 处于窗口底部：直接更新
    2. 浏览历史消息：不更新
    3. 滚动到底部：更新

注：为什么不在收到消息时处理，因为无法知道窗口的状态
注2：收到的消息清除未读，并且发送回执时，不需要更新列表，因为收到的消息并不显示已读未读标识



如何更新回执






剩余bug
1. 窗口最大化最小化
2. 会话窗口右键查看资料
3. 修改密码加loaing状态

暂时不改的bug
1. 重新安装会自动登录

剩余需求
1. 群公告
2. 合并转发
3. 自动升级

最新修复
1. 任务栏图标闪烁
2. 消息页面未读总数

需要后端提供公安网接口地址
1. 群组更新和搜索服务
2. 密码修改

环信服务器问题
1. 收发图片，文件都有可能为空，目前pc，安卓都有问题


数据来源
1. 群组
2. 会话：最近聊天
3. 人员：深圳市公安局
4. 搜索人员

列表风格
1. 简约：头像+名称，一行，这个很可能没空间展示职务
2. 默认：头像+名称+描述，两行
3. 多选与单选：多选两栏，单选一栏

场景
1. 基础列表：会话，人员，群组，群成员，
1. 创建群组：公安局(收起) + 最近聊天(筛选单聊)(展开) + 搜索人员
2. 转发：公安局(收起) + 最近聊天(筛选单聊)(展开) + 搜索人员
3. 加入群组：公开群组，默认无数据


